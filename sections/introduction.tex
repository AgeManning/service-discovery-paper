%!TEX root = ../main.tex
%=========================================================

\section{Introduction}

Ethereum~\cite{} is a decentralized, open-source blockchain with smart contract functionality, allowing the users to develop various decentralized applications (DApps),  and the most actively used blockchain~\cite{bloomberg} nowadays.
Following its decentralized design and structure, Ethereum relies on a communication infrastructure provided by a peer-to-peer (P2P) network, where individual and independent nodes, running an Ethereum client software (e.g., Go Ethereum~\cite{go-ethereum}), send and receive messages  containing transactions and blocks to achieve distributed consensus.

The set of network protocols which form the Ethereum peer-to-peer network are called DEVp2p. DEVp2p isn't specific to a particular blockchain, but should serve the needs of any networked application associated with the Ethereum umbrella.
Other protocols can also run on top of DEVp2p, such as 
The Whisper protocol~\cite{} (for decentralized
applications) and the Swarm protocol~\cite{} (for decentralized file
storage).
DEVp2p provides peers connection management and also node discovery services.
Between the DEVp2p network protocols and the app protocol (i.e., Ethereum, Whisper, Swarm, etc), RLPx~\cite{} provides a secure transport layer. 

DEVp2p manages the connections to other peers which form the overlay P2P network.
For instance,  Go-ethereum client by default establish a total of 50  connections to other Ethereum nodes.  Of these 50 slots,  two thirds are reserved for inbound connections (initiated by other peers),  while the remaining third are allocated for outbound connections. 
No further restrictions apply to inbound connections; if an inbound slot is available
Go-ethereum client simply accepts any connecting peer that supports the
Ethereum protocol and operates on the same network (main,
testing, etc.). 
The outbound slots are therefore selected by the nodes, which need to be done carefully to avoind any attacker could mount an eclipse attack.
In an eclipse attack, an
adversary monopolizes the connections of a victim, effectively
filtering the victim’s view of the blockchain.  Eclipse attacks
enable a variety of follow-up attacks such as double spending
and stubborn mining~\cite{}.

In order to find and select participants of the P2P network to initiate connections to,  DEVp2p provides a service discovery mechanism. 
Current version of DEVp2p service discover is discovery version 5 (Discv5).
The node discovery is inspired by the Kademlia
DHT~\cite{}. Information about known overlay nodes is stored in
a table separated into so-called k-buckets (or simply buckets,
in the following).
Different from the previous version of the discovery protocol (version 4),  Discv5 allows nodes to associate themselves with a set of tags, i.e., topics, and enable searching of peers that advertise themselves as associated with particular topics.  Topics can be used to identify different things such as an application or a service, a certain functionality of a node, or any other attribute by which the node may wish to belong to a connected service-specific “subnetwork” of the Ethereum network. In this document, we focus on the application of Discv5 for the discovery of service-specific peers.


%Motivation of Discv5
%Partitioned p2p network for earch service vs single p2p network with service discovery


It is envisioned that the Discv5 system will be used across many different services at large scale, mainly to form subnetworks consisting of the service peers. The basic objectives of Node Discovery v5 is to provide a facility for nodes to:
\begin{itemize}
    \item register 'topic advertisements', i.e., “ads”, at other peers in the Ethereum network
    \item find other nodes that advertised a particular topic by querying selected peers in the Ethereum network.
\end{itemize}

In this paper....
    
    
